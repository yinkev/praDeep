# ğŸš€ praDeep v0.4.0 Release Notes

**Release Date:** 2026.01.09

We're excited to announce praDeep v0.4.0! This release brings **New home page**, **Expanded provider support for LLM & Embeddings provider**, **RAG module decoupling**, **Web improvement**, and a bunch of minor improvements.

> ğŸš§ **Possible Issues:** Docker deployment and local LLM/Embeddings setup (Ollama, LM Studio) may still have compatibility issues. We're actively working on improvements. **Issues and PRs are welcome!** â†’ [Open an Issue](https://github.com/HKUDS/praDeep/issues) | [Contributing Guide](https://github.com/HKUDS/praDeep/blob/main/CONTRIBUTING.md)

## âš ï¸ Breaking Changes: Environment Configuration

**Environment variable names have been updated.** Please update your `.env` file based on `.env.example`.

| Old Variable | New Variable | Notes |
|:---|:---|:---|
| `OPENAI_API_KEY` | `LLM_API_KEY` | Now provider-agnostic |
| `OPENAI_API_BASE` | `LLM_HOST` | Renamed for clarity |
| `OPENAI_MODEL` | `LLM_MODEL` | Renamed for clarity |
| `EMBEDDING_DIM` | `EMBEDDING_DIMENSION` | Full word naming |
| *(hardcoded)* | `BACKEND_PORT` | Now configurable in `.env` (default: 8001) |
| *(hardcoded)* | `FRONTEND_PORT` | Now configurable in `.env` (default: 3782) |

**New required variables:**
- `LLM_BINDING` â€” Provider type: `openai`, `ollama`, `azure_openai`, `anthropic`, etc.
- `EMBEDDING_BINDING` â€” Provider type: `openai`, `ollama`, `jina`, `cohere`, etc.

**New optional variables:**
- `SEARCH_PROVIDER` â€” Web search provider: `perplexity` (default) or `baidu`
- `BAIDU_API_KEY` â€” For Baidu AI Search (ç™¾åº¦AIæœç´¢)
- `NEXT_PUBLIC_API_BASE` â€” Frontend API URL for **remote/LAN access** (e.g., `http://192.168.1.100:8001`)

> ğŸ’¡ **Remote Access:** If accessing praDeep from another device on your network, set `NEXT_PUBLIC_API_BASE` to your server's IP. If not set, defaults to `http://localhost:8001` (local machine only).

> ğŸ“Œ **Action Required:** Copy `.env.example` to `.env` and update your configuration before upgrading.

## âœ¨ Highlights

### ğŸ”Œ Multi-Provider LLM & Embedding Support

Expanded from local-only to a full provider ecosystem:

| LLM Providers | Embedding Providers |
|:---|:---|
| OpenAI, Anthropic, Azure OpenAI | OpenAI, Azure OpenAI, Jina AI |
| Ollama, Ollama Cloud, LM Studio | Cohere, Ollama, LM Studio |
| Groq, OpenRouter, DeepSeek, Gemini | HuggingFace (OpenAI-compatible) |

New adapter-based architecture in `src/services/embedding/adapters/` enables easy addition of new providers.

### ğŸ§© RAG Module Decoupling

New `RAGService` class provides a unified, provider-agnostic interface:

```python
from src.services.rag import RAGService

service = RAGService()  # Uses RAG_PROVIDER env var (default: raganything)
await service.initialize("my_kb", ["doc.pdf"])
result = await service.search("query", "my_kb")
```

> ğŸ“Œ Currently supports **RAG-Anything** (MinerU + LightRAG). More backends coming soon!

### ğŸŒ™ Dark Mode & UI Overhaul

- **Theme toggle** with system preference detection & localStorage persistence
- **Collapsible sidebar** with icon-only compact mode
- **Settings page rebuild**: Environment variable management with category-based organization
- Consistent dark mode styling across all pages

### âš™ï¸ Centralized Configuration

New `settings.py` using `pydantic-settings` for unified configuration:

| Category | Environment Variables |
|:---|:---|
| LLM | `LLM_BINDING`, `LLM_MODEL`, `LLM_HOST`, `LLM_API_KEY` |
| Embedding | `EMBEDDING_BINDING`, `EMBEDDING_MODEL`, `EMBEDDING_HOST`, `EMBEDDING_API_KEY`, `EMBEDDING_DIMENSION` |
| RAG | `RAG_PROVIDER` |
| TTS | `TTS_MODEL`, `TTS_URL`, `TTS_API_KEY`, `TTS_VOICE` |
| Search | `PERPLEXITY_API_KEY` |

Runtime updates via `/api/settings/env` with automatic `.env` persistence.

## ğŸ“¦ What's Changed

### Core Infrastructure

- Added `settings.py` with `pydantic-settings` for centralized config management
- Added `src/core/llm_factory.py` with unified `llm_complete()` function
- Added `/api/embedding-providers` router for embedding configuration CRUD
- Added `/api/settings/env` endpoints for runtime environment management

### Services Module Restructure (`src/services/`)

```
services/
â”œâ”€â”€ embedding/          # ğŸ†• Adapter-based embedding providers
â”‚   â”œâ”€â”€ adapters/       # Provider implementations
â”‚   â”‚   â”œâ”€â”€ base.py, openai_compatible.py, jina.py, cohere.py, ollama.py
â”‚   â”œâ”€â”€ client.py       # Unified embedding client
â”‚   â”œâ”€â”€ provider.py     # Provider manager (singleton)
â”‚   â””â”€â”€ provider_config.py  # Multi-provider config persistence
â”œâ”€â”€ llm/                # LLM configuration & client
â”œâ”€â”€ rag/                # ğŸ†• Decoupled RAG system
â”‚   â”œâ”€â”€ service.py      # Unified RAGService entry point
â”‚   â”œâ”€â”€ factory.py      # Pipeline factory
â”‚   â”œâ”€â”€ pipelines/      # Backend implementations
â”‚   â”‚   â””â”€â”€ raganything.py, lightrag.py, llamaindex.py, academic.py
â”‚   â””â”€â”€ components/     # Modular RAG components
â”‚       â”œâ”€â”€ chunkers/   # Text chunking strategies
â”‚       â”œâ”€â”€ parsers/    # Document parsers (PDF, Markdown, Text)
â”‚       â”œâ”€â”€ embedders/  # Embedding wrappers
â”‚       â”œâ”€â”€ indexers/   # Vector & Graph indexers
â”‚       â””â”€â”€ retrievers/ # Dense & Hybrid retrieval
â”œâ”€â”€ prompt/             # PromptManager singleton
â”œâ”€â”€ tts/                # TTS configuration
â””â”€â”€ setup/              # Initialization utilities
```

### Frontend Updates

- ğŸ†• Added **Home page** (`web/app/page.tsx`) with feature overview
- ğŸ†• Rebuilt **History page** (`web/app/history/page.tsx`) with improved activity views
- Added `web/lib/theme.ts` with theme utilities (`initializeTheme()`, `setTheme()`)
- Added `web/hooks/useTheme.ts` for React theme hook
- Added `web/components/ThemeScript.tsx` for SSR theme hydration
- Added `web/components/ChatSessionDetail.tsx` for history page
- Refactored `Sidebar.tsx` with collapsible mode
- Rebuilt `settings/page.tsx` with environment variable management

### IdeaGen Improvements

Enhanced 4-stage workflow: Loose Filter â†’ Explore Ideas â†’ Strict Filter â†’ Generate Statement

## ğŸ³ Docker

Streamlined single-container deployment:

```bash
docker compose up -d
# Exposes: backend (8001), frontend (3782)
# Volumes: ./config (ro), ./data/user, ./data/knowledge_bases
```

Cloud deployment supported via `NEXT_PUBLIC_API_BASE_EXTERNAL`.

## â¬†ï¸ Upgrade

```bash
git pull origin main
docker compose build && docker compose up -d
```

**Migration Notes:**
- Rename `EMBEDDING_DIM` â†’ `EMBEDDING_DIMENSION`
- Default RAG provider changed to `raganything`

## What's Changed
* chore(deps): bump actions/checkout from 4 to 6 by @dependabot in https://github.com/HKUDS/praDeep/pull/39
* chore(deps): bump actions/configure-pages from 4 to 5 by @dependabot in https://github.com/HKUDS/praDeep/pull/40
* chore(deps): bump lucide-react from 0.460.0 to 0.562.0 in /web by @dependabot in https://github.com/HKUDS/praDeep/pull/43
* chore(deps): bump react-markdown from 9.1.0 to 10.1.0 in /web by @dependabot in https://github.com/HKUDS/praDeep/pull/47
* chore(deps): bump node from 20-slim to 25-slim by @dependabot in https://github.com/HKUDS/praDeep/pull/42
* chore(deps): bump actions/upload-pages-artifact from 3 to 4 by @dependabot in https://github.com/HKUDS/praDeep/pull/38
* chore(deps): bump framer-motion from 11.18.2 to 12.24.0 in /web by @dependabot in https://github.com/HKUDS/praDeep/pull/44
* chore(deps): bump tailwind-merge from 2.6.0 to 3.4.0 in /web by @dependabot in https://github.com/HKUDS/praDeep/pull/45
* chore(deps): bump @types/node from 22.19.3 to 25.0.3 in /web by @dependabot in https://github.com/HKUDS/praDeep/pull/48
* fix(ci): Resolve linting and formatting issues by @ahmedjawedaj in https://github.com/HKUDS/praDeep/pull/50
* Feature/rag plugin system by @tusharkhatriofficial in https://github.com/HKUDS/praDeep/pull/57
* fix: resolve double decoration in embedding functions for OpenRouter by @Laksh-star in https://github.com/HKUDS/praDeep/pull/64
* Fix critical jspdf vuln and clean up pre-commit hooks by @RinZ27 in https://github.com/HKUDS/praDeep/pull/62
* UI/theme by @tusharkhatriofficial in https://github.com/HKUDS/praDeep/pull/51
* feat: support baidu ai search by @yugasun in https://github.com/HKUDS/praDeep/pull/55
* Cleanup: address reviewer feedback on PR #62 (Final) by @RinZ27 in https://github.com/HKUDS/praDeep/pull/67
* provides more llm providers supports, UI updates by @kushalgarg101 in https://github.com/HKUDS/praDeep/pull/77
* Dev embeddings providers by @FacundoMajda in https://github.com/HKUDS/praDeep/pull/79

## ğŸ¤ New Contributors
* @dependabot made their first contribution in https://github.com/HKUDS/praDeep/pull/39
* @Laksh-star made their first contribution in https://github.com/HKUDS/praDeep/pull/64
* @yugasun made their first contribution in https://github.com/HKUDS/praDeep/pull/55
* @kushalgarg101 made their first contribution in https://github.com/HKUDS/praDeep/pull/77
* @FacundoMajda made their first contribution in https://github.com/HKUDS/praDeep/pull/79

**Full Changelog**: https://github.com/HKUDS/praDeep/compare/v0.3.0...v0.4.0
