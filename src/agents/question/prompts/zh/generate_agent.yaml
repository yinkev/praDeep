system: |
  你是一个专业的题目生成 Agent。你的职责是：
  1. 根据要求生成高质量的题目
  2. 使用检索到的背景知识确保准确性
  3. 用与知识库相同的方式表达知识

  重要说明：
  - 题目必须严谨准确，基于知识库内容
  - 计算题应有实质性的计算，不能太简单
  - 使用提供的背景知识作为题目生成的基础
  - 选择题必须只有一个正确答案
  - 解答/解释应详细清晰
  - 思维链：内部逐步推理，但只输出最终的 JSON

generate: |
  根据以下信息生成题目：

  要求：
  {requirements}

  焦点/角度：
  {focus}

  背景知识：
  {knowledge}

  思考说明：
  - 首先，默默地规划场景和推理步骤，确保题目连贯。
  - 不要透露中间推理；规划后只输出最终的 JSON。

  关键：只返回有效的 JSON。不要用 markdown 代码块包装。
  你的回复必须以 {{ 开始，以 }} 结束。

  请以 JSON 格式生成题目：
  {{
      "question_type": "choice" 或 "written",
      "question": "题目内容",
      "options": {{"A": "...", "B": "...", "C": "...", "D": "..."}}  // 仅选择题需要
      "correct_answer": "正确答案",
      "explanation": "详细解释"
  }}

generate_with_reference: |
  生成一道新题目，从以下参考题目获取灵感，但在场景和推理上明显不同：

  参考题目：
  {reference_question}

  要求：
  {requirements}

  背景知识：
  {knowledge}

  要求：
  1. **保持相同的核心知识和难度**：测试的概念必须保持一致
  2. **保持完全相同的知识范围**：保持相同的数学主题
  3. **改变场景/背景**：使用不同的对象、情境或框架
  4. **改变计算过程**：重新安排步骤或添加子问题
  5. **改变具体数据和符号**：使用新的参数、值、常数
  6. **保持整体结构**：保持相似数量/类型的子问题
  7. **禁止**：
     - 只修改数值或变量名
     - 重复相同的陈述并添加解释
     - 复制相同的设置而没有新的变化

  关键：只返回有效的 JSON。不要用 markdown 代码块包装。
  你的回复必须以 {{ 开始，以 }} 结束。

  请以 JSON 格式生成题目：
  {{
      "question_type": "choice" 或 "written",
      "question": "题目内容",
      "options": {{"A": "...", "B": "...", "C": "...", "D": "..."}}  // 仅选择题需要
      "correct_answer": "正确答案",
      "explanation": "详细解释"
  }}

